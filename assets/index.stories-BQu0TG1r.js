import{r as d,j as e,c as t}from"./iframe-DPlMxrgh.js";import{a as C,I as b,M as D}from"./index-D57UY3lQ.js";import{C as q,A as P,M as Q}from"./index-DbSxbZG6.js";import{L as R}from"./link-B8eMmaKr.js";import{c as S}from"./cx-BFURdk0p.js";import{p as V}from"./pixel-border-B1oUDgUn.js";import{m as w}from"./proxy-PjhcWVYS.js";import"./preload-helper-PPVm8Dsz.js";import"./index-z439eqk_.js";const I={quest:"クエストにいどんだ！",powerup:"パワーアップアイテムをつかった！",villain:"ヴィランとたたかった！"},j=({href:n,disabled:i,title:r,description:o,reorderHandleSlot:c,enableQuickAction:N=!1,entityType:y,onExecute:g})=>{const[l,h]=d.useState(!1),[L,_]=d.useTransition(),k=d.useRef(null),{add:v}=C();d.useEffect(()=>{if(!l)return;const s=a=>{k.current&&!k.current.contains(a.target)&&h(!1)};return document.addEventListener("mousedown",s),document.addEventListener("touchstart",s),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("touchstart",s)}},[l]);const A=s=>{s.stopPropagation(),!(!g||!y)&&_(async()=>{const a=await g();if(a?.type==="error"){v({message:a.error.message});return}v({message:I[y]}),h(!1)})};return N&&y&&g&&!i?e.jsxs("div",{className:t({position:"relative",overflow:"hidden"}),ref:k,children:[e.jsx(w.button,{layout:!0,initial:!1,animate:{x:l?-96:0},transition:{type:"spring",stiffness:300,damping:30},onClick:s=>{s.stopPropagation(),h(a=>!a)},className:S(V({borderWidth:2,borderColor:"interactive.border"}),t({display:"flex",alignItems:"center",backgroundColor:"interactive.background",cursor:"pointer",width:"[100%]",textAlign:"left"})),children:e.jsx("div",{className:t({display:"flex",gap:"4px",padding:"4px 4px 4px 8px",flex:"1",...c&&{paddingRight:"32px"}}),children:e.jsxs("div",{className:t({display:"flex",flex:"1",flexDirection:"column",justifyContent:"center",gap:"8px"}),children:[r,o&&e.jsx("p",{className:t({color:"foreground.secondary",textStyle:"Body.tertiary",lineClamp:3}),children:o})]})})}),l&&e.jsxs("div",{className:t({position:"absolute",right:0,top:0,height:"[100%]",display:"flex",alignItems:"center",gap:"8px",paddingRight:"8px"}),children:[e.jsx(R,{href:n,className:t({display:"flex",alignItems:"center",justifyContent:"center"}),children:e.jsx(b,{size:"md",children:e.jsx("span",{className:t({transform:"scaleX(-1)",display:"flex"}),children:e.jsx(q,{size:24})})})}),e.jsx(b,{onClick:A,disabled:L,size:"md",active:!0,children:e.jsx(P,{size:24})})]}),e.jsx("span",{className:t({position:"absolute",top:"50%",right:"0",transform:"translateY(-50%)"}),children:c})]}):e.jsxs("div",{className:t({position:"relative"}),children:[e.jsx(D,{href:n,disabled:i,pixelBorderColor:i?"foreground.disabled":void 0,children:e.jsx("div",{className:t({...i&&{color:"foreground.disabled"},display:"flex",gap:"4px",padding:"4px 4px 4px 8px",...c&&{paddingRight:"32px"}}),children:e.jsxs("div",{className:t({display:"flex",flex:"1",flexDirection:"column",justifyContent:"center",gap:"8px"}),children:[r,o&&e.jsx("p",{className:t({color:"foreground.secondary",textStyle:"Body.tertiary",lineClamp:3}),children:o})]})})}),e.jsx("span",{className:t({position:"absolute",top:"50%",right:"0",transform:"translateY(-50%)"}),children:c})]})},E=({onPointerDown:n,onPointerUp:i})=>e.jsx("div",{className:t({alignItems:"center",display:"flex",minHeight:"[30px]",minWidth:"[30px]",justifyContent:"center",touchAction:"none",px:"4px"}),onPointerDown:r=>{r.stopPropagation(),n?.(r)},onPointerUp:r=>{i?.(r)},children:e.jsx(Q,{size:24})});try{j.displayName="EntityLink",j.__docgenInfo={description:"",displayName:"EntityLink",props:{href:{defaultValue:null,description:"",name:"href",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"ReactNode"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},reorderHandleSlot:{defaultValue:null,description:"",name:"reorderHandleSlot",required:!1,type:{name:"ReactNode"}},enableQuickAction:{defaultValue:{value:"false"},description:"",name:"enableQuickAction",required:!1,type:{name:"boolean"}},entityType:{defaultValue:null,description:"",name:"entityType",required:!1,type:{name:"any"}},onExecute:{defaultValue:null,description:"",name:"onExecute",required:!1,type:{name:"() => Promise<ExecuteResult>"}}}}}catch{}try{E.displayName="EntityLinkReorderHandle",E.__docgenInfo={description:"",displayName:"EntityLinkReorderHandle",props:{onPointerDown:{defaultValue:null,description:"",name:"onPointerDown",required:!0,type:{name:"PointerEventHandler<HTMLDivElement>"}},onPointerUp:{defaultValue:null,description:"",name:"onPointerUp",required:!0,type:{name:"PointerEventHandler<HTMLDivElement>"}}}}}catch{}const X={component:j,args:{href:"#",title:"たいとる",description:"せつめい"},tags:["autodocs"],decorators:[n=>e.jsx("div",{style:{maxWidth:"400px",padding:"16px"},children:e.jsx(n,{})})]},p={},u={args:{enableQuickAction:!0,entityType:"powerup",onExecute:async()=>({type:"ok"})}},m={args:{disabled:!0}},f={args:{title:"長いタイトルのテスト",description:"これは非常に長い説明文です。複数行にわたって表示されるかどうかをテストしています。lineClampが3に設定されているため、3行を超える場合は省略されます。"}},x={args:{enableQuickAction:!0,entityType:"quest",onExecute:async()=>({type:"ok"}),title:"長いタイトルのテスト",description:"これは非常に長い説明文です。クイックアクションが有効な状態で複数行にわたって表示されるかどうかをテストしています。"}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:"{} satisfies Story",...p.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  args: {
    enableQuickAction: true,
    entityType: 'powerup',
    onExecute: async () => ({
      type: 'ok'
    }) as const
  }
} satisfies Story`,...u.parameters?.docs?.source}}};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:`{
  args: {
    disabled: true
  }
} satisfies Story`,...m.parameters?.docs?.source}}};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  args: {
    title: '長いタイトルのテスト',
    description: 'これは非常に長い説明文です。複数行にわたって表示されるかどうかをテストしています。lineClampが3に設定されているため、3行を超える場合は省略されます。'
  }
} satisfies Story`,...f.parameters?.docs?.source}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  args: {
    enableQuickAction: true,
    entityType: 'quest',
    onExecute: async () => ({
      type: 'ok'
    }) as const,
    title: '長いタイトルのテスト',
    description: 'これは非常に長い説明文です。クイックアクションが有効な状態で複数行にわたって表示されるかどうかをテストしています。'
  }
} satisfies Story`,...x.parameters?.docs?.source}}};const F=["Default","WithQuickAction","Disabled","LongDescription","WithQuickActionLongDescription"];export{p as Default,m as Disabled,f as LongDescription,u as WithQuickAction,x as WithQuickActionLongDescription,F as __namedExportsOrder,X as default};
