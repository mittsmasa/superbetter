function N(t,e,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:n}).format(e).split(/\s/g).slice(2).join(" ")}const I={},f={};function r(t,e){try{const o=(I[t]||=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format)(e).split("GMT")[1];return o in f?f[o]:C(o,o.split(":"))}catch{if(t in f)return f[t];const n=t?.match(L);return n?C(t,n.slice(1)):NaN}}const L=/([+-]\d\d):?(\d\d)?/;function C(t,e){const n=+(e[0]||0),o=+(e[1]||0),s=+(e[2]||0)/60;return f[t]=n*60+o>0?n*60+o+s:n*60-o-s}class i extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(r(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),M(this),y(this)):this.setTime(Date.now())}static tz(e,...n){return n.length?new i(...n,e):new i(Date.now(),e)}withTimeZone(e){return new i(+this,e)}getTimezoneOffset(){const e=-r(this.timeZone,this);return e>0?Math.floor(e):Math.ceil(e)}setTime(e){return Date.prototype.setTime.apply(this,arguments),y(this),+this}[Symbol.for("constructDateFrom")](e){return new i(+new Date(e),this.timeZone)}}const w=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!w.test(t))return;const e=t.replace(w,"$1UTC");i.prototype[e]&&(t.startsWith("get")?i.prototype[t]=function(){return this.internal[e]()}:(i.prototype[t]=function(){return Date.prototype[e].apply(this.internal,arguments),j(this),+this},i.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),y(this),+this}))});function y(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-r(t.timeZone,t)*60))}function j(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),M(t)}function M(t){const e=r(t.timeZone,t),n=e>0?Math.floor(e):Math.ceil(e),o=new Date(+t);o.setUTCHours(o.getUTCHours()-1);const s=-new Date(+t).getTimezoneOffset(),$=-new Date(+o).getTimezoneOffset(),g=s-$,F=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();g&&F&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+g);const a=s-n;a&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+a);const l=new Date(+t);l.setUTCSeconds(0);const D=s>0?l.getSeconds():(l.getSeconds()-60)%60,u=Math.round(-(r(t.timeZone,t)*60))%60;(u||D)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+u),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+u+D));const m=r(t.timeZone,t),p=m>0?Math.floor(m):Math.ceil(m),b=-new Date(+t).getTimezoneOffset()-p,z=p!==n,S=b-a;if(z&&S){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+S);const h=r(t.timeZone,t),H=h>0?Math.floor(h):Math.ceil(h),T=p-H;T&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+T),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+T))}}class c extends i{static tz(e,...n){return n.length?new c(...n,e):new c(Date.now(),e)}toISOString(){const[e,n,o]=this.tzComponents(),s=`${e}${n}:${o}`;return this.internal.toISOString().slice(0,-1)+s}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,n,o,s]=this.internal.toUTCString().split(" ");return`${e?.slice(0,-1)} ${o} ${n} ${s}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[n,o,s]=this.tzComponents();return`${e} GMT${n}${o}${s} (${N(this.timeZone,this)})`}toLocaleString(e,n){return Date.prototype.toLocaleString.call(this,e,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleDateString(e,n){return Date.prototype.toLocaleDateString.call(this,e,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleTimeString(e,n){return Date.prototype.toLocaleTimeString.call(this,e,{...n,timeZone:n?.timeZone||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset(),n=e>0?"-":"+",o=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),s=String(Math.abs(e)%60).padStart(2,"0");return[n,o,s]}withTimeZone(e){return new c(+this,e)}[Symbol.for("constructDateFrom")](e){return new c(+new Date(e),this.timeZone)}}const U=Symbol.for("constructDateFrom");function x(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&U in t?t[U](e):t instanceof Date?new t.constructor(e):new Date(e)}function Z(t,e){return x(t,t)}function k(t,e){const n=Z(t);return n.setHours(23,59,59,999),n}function A(t,e){const n=Z(t);return n.setHours(0,0,0,0),n}const B=(t,e="Asia/Tokyo")=>new c(t,e),O=t=>new Date(t),G=t=>{const e=B(t),n=O(A(e)),o=O(k(e));return{start:n,end:o}},P=(t,e="Asia/Tokyo")=>{const n=new Intl.DateTimeFormat("ja-JP",{weekday:"short",timeZone:e}).format(t),o=new Intl.DateTimeFormat("en-US",{day:"numeric",timeZone:e}).format(t);return{day:n,date:o}};export{B as a,G as b,P as g};
